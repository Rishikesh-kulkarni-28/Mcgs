<?php require_once __DIR__.'/../includes/dbconnection.php'; require_once __DIR__.'/header.php'; $rows = []; $from = $_GET['from'] ?? ''; $to = $_GET['to'] ?? ''; if ($from && $to) { $st = $dbh->prepare('SELECT RefNumber,FullName,ContactNumber,Email,CreationDate FROM tblmedicalcard WHERE DATE(CreationDate) BETWEEN ? AND ? ORDER BY CreationDate DESC'); $st->execute([$from,$to]); $rows = $st->fetchAll(); } ?> <h3>Between Dates Reports</h3> <form class="row g-2 mb-3"> <div class="col-auto"><input type="date" class="form-control" name="from" value="<?php echo htmlspecialchars($from); ?>" required></div> <div class="col-auto"><input type="date" class="form-control" name="to" value="<?php echo htmlspecialchars($to); ?>" required></div> <div class="col-auto"><button class="btn btn-primary">View</button></div> <?php if($from && $to): ?> <div class="col-auto"><a class="btn btn-outline-success" href="report-export.php?from=<?php echo urlencode($from); ?>&to=<?php echo urlencode($to); ?>">Export CSV</a></div> <?php endif; ?> </form> <?php if($from && $to): ?> <div class="table-responsive"> <table class="table table-striped"> <thead><tr><th>#</th><th>RefNumber</th><th>FullName</th><th>Contact</th><th>Email</th><th>CreationDate</th></tr></thead> <tbody> <?php foreach($rows as $i=>$r): ?> <tr> <td><?php echo $i+1; ?></td> <td><?php echo htmlspecialchars($r['RefNumber']); ?></td> <td><?php echo htmlspecialchars($r['FullName']); ?></td> <td><?php echo htmlspecialchars($r['ContactNumber']); ?></td> <td><?php echo htmlspecialchars($r['Email']); ?></td> <td><?php echo htmlspecialchars($r['CreationDate']); ?></td> </tr> <?php endforeach; ?> </tbody> </table> </div> <?php endif; ?> <?php require_once __DIR__.'/footer.php'; ?>